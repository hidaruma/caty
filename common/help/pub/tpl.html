<!-- -*- coding: utf-8 -*- -->
<?caty-meta template="smarty" ?>
{** 
 * コマンドの名前を作る
 * これは今動かない。
 *}
{function name=cmdname type="hlp:CmdInfo"}
  <span {if $deprecated} style="color:red;font-weight:bold" {/if}>{$name}{if $typeVars|notempty}<
    {foreach from=$typeVars item=var name=vars}{$var}
      {if $smarty.foreach.vars.last|not}, {/if}
    {/foreach}
   >
  {*{/if}*}
  </span>
{/function}

{* これは動く *}
{function name=cmdname1 type="hlp:CmdInfo"}
  <span {if $deprecated} style="color:red;font-weight:bold" {/if}>{$name}{if $typeVars|notempty}<
    {foreach from=$typeVars item=var name=vars}{$var} {/foreach}
   >
  {/if}
  </span>
{/function}

{* cmdname1 とレイアウトを変えただけだが、挙動が変わる *}
{function name=cmdname2 type="hlp:CmdInfo"}
  <span {if $deprecated} style="color:red;font-weight:bold" {/if}>{$name}{if $typeVars|notempty}
   <{foreach from=$typeVars item=var name=vars}{$var} {/foreach}
   >
   {/if}
  </span>
{/function}


{** 
 * コマンドのプロファイルをテーブルの1行として整形
 *}
{function name=cmd type="hlp:CmdInfo"}
  <tr class="cmd"><td>{call name=cmdname1}</td><td>{$input}</td><td>{$output}</td><td>{$throws}<td>{$implemented}</td></tr>
{/function}

{**
 * コマンドプロファイルのリストをテーブルとして整形
*}
{function name=cmdlist type="hlp:CmdList"}
  <table class="cmdlist" border="1">
  <tr><th>名前</th><th>入力</th><th>出力</th><th>例外</th><th>実装</th></tr>
  {foreach from=$_CONTEXT item=cmd}
    {call name=cmd context=$cmd }
  {/foreach}
  </table>
{/function}

{**
 * モジュール情報をh2セクションとして整形
 * type="hlp:ModInfo"
 *}
{function name=mod }
 <div class="mod">
  <h2>モジュール {$_CONTEXT.fullname}</h2>
  {call name=cmdlist context=$_CONTEXT.cmds }
 </div>
{/function}

<html>
  <head>
    <title>{$title}</title>
  </head>
  <body>
    <h1>{$title}</h1>

    {foreach from=$mods item=mod}
       {call name=mod context=$mod }
    {/foreach}

  </body>
</html>
